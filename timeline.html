<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>timeline</title>
    <link rel="stylesheet" href="timeline.css">
</head>

<body>
    <div class="container">
        <div class="top-section">
            <h1>Techno KreatiCon Timeline</h1>
            <p>The event will take place over two days, with specific sessions scheduled as follows</p>
        </div>


        <div class="timeline">
            <div class="timeline__line"></div>

            <div class="timeline__section">
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>9:30 AM – 10:00 AM</h2>
                    <p>Opening and event briefing welcome ceremony Registration./p>
                </div>
            </div>


            <div class="timeline__section">
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>10:00 AM – 1:00 PM</h2>
                    <p>Idea pitching for Domain 1, Domain 2, and Domain 3 (approx. 1 hour)</p>
                </div>
            </div>


            <div class="timeline__section">
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>1:00 PM – 2:00 PM</h2>
                    <p> Lunch break</p>
                </div>
            </div>


            <div class="timeline__section">
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>2:00 PM – 3:30 PM</h2>
                    <p>Continuation of idea pitching for the three domains, followed by selection of one finalist per domain</p>
                </div>
            </div>
            
            <div class="timeline__section">
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>

            <div class="timeline__section"></div>
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>

            <div class="timeline__section"></div>
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>

            <div class="timeline__section"></div>
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>

            <div class="timeline__section"></div>
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>

            <div class="timeline__section"></div>
                <div class="timeline__section__bead"></div>
                <div class="timeline__section__content">
                    <h2>3:30 PM – 4:00 PM</h2>
                    <p>Day 1 closing remarks and announcements for the next day</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        function qs(selector, all = false) {
            return all ? document.querySelectorAll(selector) : document.querySelector(selector);
        }

        const sections = qs('.timeline__section', true);
        const timeline = qs('.timeline');
        const line = qs('.timeline__line');

        line.style.bottom = `calc(100% - 20px)`;
        let prevScrollY = window.scrollY;
        let up, down;
        let full = false;
        let set = 0;
        const targetY = window.innerHeight * .8;

        function scrollHandler(e) {
            const { scrollY } = window;

            up = scrollY < prevScrollY;
            down = !up;

            const timelineRect = timeline.getBoundingClientRect();
            const lineRect = line.getBoundingClientRect();
            // const lineHeight = lineRect.bottom - lineRect.top;
            const dist = targetY - timelineRect.top;

            console.log(dist);

            if (down && !full) {
                set = Math.max(set, dist);
                line.style.bottom = `calc(100% - ${set}px)`;
            }

            if (dist > timeline.offsetHeight + 50 && !full) {
                full = true;
                line.style.bottom = `-50px`;
            }

            sections.forEach(item => {
                // console.log(item);
                const rect = item.getBoundingClientRect();
                //     console.log(rect);

                if (rect.top + item.offsetHeight / 5 < targetY) {
                    item.classList.add('show-me');
                }
            });

            // console.log(up, down);
            prevScrollY = window.scrollY;
        }


        scrollHandler();
        line.style.display = 'block';
        window.addEventListener('scroll', scrollHandler);
    </script>
</body>

</html>